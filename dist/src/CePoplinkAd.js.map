{"version":3,"file":"CePoplinkAd.js","sourceRoot":"","sources":["../../src/CePoplinkAd.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, LitElement, property, query } from 'lit-element';\n\ninterface Ad {\n  id: string;\n  banner: string;\n  bannerAlt: string;\n  keyword: string;\n}\n\nexport class CePoplinkAd extends LitElement {\n  static styles = css`\n    :host {\n      display: inline-flex;\n      flex-direction: column;\n      position: relative;\n      color: var(--ce-poplink-ad-text-color, #000);\n    }\n    .keyword {\n      position: relative;\n      display: inline;\n      border: 1px dotted gray;\n      padding-right: 1px;\n      padding-left: 1px;\n    }\n    .keywordindicator {\n      position: absolute;\n      z-index: 10;\n      top: -20px;\n      left: 0;\n      border-radius: 5px 5px 5px 5px;\n      overflow: hidden;\n      opacity: 0.3;\n    }\n    .highlightkeywordindicator {\n      opacity: 1;\n    }\n    .closebutton {\n      opacity: 0.2;\n    }\n    .highlightclosebutton {\n      opacity: 1;\n    }\n    .bannercontainer {\n      position: absolute;\n      z-index: 10;\n      top: 20px;\n    }\n    .rightAlign {\n      right: 0;\n    }\n    .leftAlign {\n      left: 0;\n    }\n    .visible {\n      display: inline;\n    }\n    .invisible {\n      display: none;\n    }\n  `;\n\n  @property({ type: Object }) ad: Ad;\n\n  @property({ type: String }) token;\n\n  @property({ type: Number }) timeonscreen;\n\n  @property({ type: Boolean }) visible = false;\n\n  @property({ type: Boolean }) showonleft = true;\n\n  @property({ type: Boolean }) highlightkeywordindicator = false;\n\n  @property({ type: Boolean }) highlightclosebutton = false;\n\n  @property({ type: Number }) keywordcontainerwidth = 0;\n\n  @property({ type: Number }) keywordcontainerX = 0;\n\n  @query('#poplink-ad-keyword')\n  _keyword: any;\n\n  _handleFocus() {\n    this.visible = true;\n  }\n\n  _handleMouseOver() {\n    this.visible = true;\n  }\n\n  _handleClose() {\n    this.visible = false;\n  }\n\n  _handleWindowResize() {\n    const windowXCenter = window.innerWidth / 2;\n    if (this.keywordcontainerX + this.keywordcontainerwidth < 250) {\n      this.showonleft = true;\n    } else if (\n      this.keywordcontainerX + this.keywordcontainerwidth >\n      windowXCenter\n    )\n      this.showonleft = true;\n    else this.showonleft = false;\n  }\n\n  async firstUpdated() {\n    await new Promise(r => setTimeout(r, 0));\n    const x = this.shadowRoot\n      ?.querySelector(`#${this.ad.id}`)\n      ?.getBoundingClientRect().x;\n    const width = this.shadowRoot\n      ?.querySelector(`#${this.ad.id}`)\n      ?.getBoundingClientRect().width;\n\n    this.keywordcontainerwidth = width || 0;\n    this.keywordcontainerX = x || 0;\n\n    window.addEventListener('resize', this._handleWindowResize.bind(this));\n  }\n\n  constructor(ad: Ad, token: string, visible: boolean) {\n    super();\n\n    this.ad = ad;\n    this.visible = visible;\n    this.timeonscreen = 0;\n    this.token = token;\n\n    setInterval(() => {\n      this.timeonscreen += 1;\n    }, 1000);\n  }\n\n  _handleKeywordIndicatorMouseEnter() {\n    this.highlightkeywordindicator = true;\n  }\n\n  _handleKeywordIndicatorMouseLeave() {\n    this.highlightkeywordindicator = false;\n  }\n\n  _handleCloseMouseEnter() {\n    this.highlightclosebutton = true;\n  }\n\n  _handleCloseMouseLeave() {\n    this.highlightclosebutton = false;\n  }\n\n  render() {\n    return html`\n      <span id=\"${this.ad.id}\">\n        <span\n          class=\"keyword\"\n          @mouseover=${this._handleMouseOver}\n          @focus=${this._handleFocus}\n        >\n          ${this.ad.keyword}\n        </span>\n        <span\n          class=\"keywordindicator ${this.highlightkeywordindicator\n            ? 'highlightkeywordindicator'\n            : ''}\"\n          @mouseenter=${this._handleKeywordIndicatorMouseEnter}\n          @mouseleave=${this._handleKeywordIndicatorMouseLeave}\n        >\n          <a href=${`https://poplink.in`} target=\"_blank\">\n            <img\n              class=\"${this.visible ? 'visible' : 'invisible'}\"\n              src=\"https://poplink.in/static/media/logo.8d4c23d4.jpg\"\n              alt=\"Poplink Ads logo\"\n              width=\"20\"\n              height=\"20\"\n            />\n          </a>\n        </span>\n        <span\n          class=\"bannercontainer ${this.showonleft\n            ? 'leftAlign'\n            : 'rightAlign'}\"\n        >\n          <a\n            href=${`https://ads.poplink.in/r?t=${this.timeonscreen}&aid=${this.ad.id}&at=\"${this.token}\"`}\n            target=\"_blank\"\n          >\n            <img\n              class=\"${this.visible ? 'visible' : 'invisible'}\"\n              src=${this.ad.banner}\n              alt=${this.ad.bannerAlt}\n            />\n          </a>\n          <button\n            class=\"closebutton ${this.visible ? 'visible' : 'invisible'} ${this\n              .highlightclosebutton\n              ? 'highlightclosebutton'\n              : ''}\"\n            @mouseenter=${this._handleCloseMouseEnter}\n            @mouseleave=${this._handleCloseMouseLeave}\n            @click=${this._handleClose}\n          >\n            Close Ad\n          </button>\n        </span>\n      </span>\n    `;\n  }\n}\n"]}